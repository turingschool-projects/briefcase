language: ruby
rvm:
  - 2.3.0

services:
  - postgresql

before_script:
  - psql -c 'create database briefcase_test;' -U postgres

before_install:
# Source: https://mediocre.com/forum/topics/phantomjs-2-and-travis-ci-we-beat-our-heads-against-a-wall-so-you-dont-have-to
  - wget https://s3.amazonaws.com/travis-phantomjs/phantomjs-2.1.1-ubuntu-12.04.tar.bz2
  - tar -xjf phantomjs-2.1.1-ubuntu-12.04.tar.bz2
  - sudo rm -rf /usr/local/phantomjs/bin/phantomjs
  - sudo mv phantomjs /usr/local/phantomjs/bin/phantomjs

script:
  - bundle exec rake db:migrate --trace
  - bundle exec rspec

branches:
  only:
  - master
  - development

env:
  global:
  - secure: b1kS4EDqltEnsXFEimpt1oKZIq9llySX9y6LVVLYqryG21VVoApLn2U++m6/9ppyZiV1jDOEMJo0u88x46ds8VptCrr5zhZBgQ0CMlaujuYDqvGGUC+It52Wg9SemM4SHdaNUgSeQIUjEXh8wx5/jTO9WH09rPsF0PxaY7+vIanunMbPYgJ7PadIpR+Bb/PNW/O2WayToqCy8q3+rBkBhNqtnNdiZppfYtz8827f9JzpLP1XO7zdzBeuthso4gHqv42xTmDS4BGUYdo7rQS4JceS9pxG4WaOGx7pjscBIse76mQZ/LOcecJ7qGVIAVfVUpF8KuZxg6Mf4IVTdfQxfccfco3najziymcoE5TgJRYv12bcGrmDDfakHcx/DUsFcmox5aZqCg7/jqeOVYwX40eOswrsU3fMXkyNMkNin1ufIwk31lKseGDcRT4pxaZZrc5WB7U2L18k/qIVJc+cPSEIDgTrop2FcoYaKi7iKFh5e6UeHak/wka7Hr9y//0A4Eucpay1JI9YLuTiViV5cK2DnvindVxMMU/BcYZNIfmqgD9JN+Zpqs267/c9PWYcdlysRWUgh5QnST7H/EbTQfq6IpL7fA8WUIF1oft+LeYQdPxR/kC/z9TWj6oDm8GfOkqsHovdPGe2UdwsGa/tuDzsZx9BAFdgHT+TcsduO5k=
  - secure: M/FcvZ6vvna8vhRsStnwS/mu350Xdyfu8+MFNRhRCAxUpPoGlHl6Ti3kZlq/lbBO6+Q/hBagv2+zij8o18rrfumG96lv5jLoMZtHUjvgGRhnsaIe8ijDIrR5cU41awcptq+3PeqODdMab9ttUZU/qFUtRUKIq5a1Y74fOrnYF2QcnAFESGGKpazVbXvf4KVZxpivxuDEsHLFh89hDUyahkVk5EQSGL7mcRWSTwU874eBtUiIzRImqigyZBLxDsb70OopN3KH2ar3hsUqjWDvfMehDEZgZHGQazKVqfpO1VQ4wJWDrOLyvHgb+7/71Hi+HjI//JK6pkuN/26w7VysO7dKgVybc0deYLDO9IrZvl+DwJOrwsITuh4pMo0+C39IgxqfaqJ2gVyXguSsnnA6nZZht0NHVOW/yWyhPhEXsODv+p3RzTQWBIdohUBXqV7QNizhtL+XDGpWSzyjPPWsRMYBd+gieZGs2/AYxz7lzpK+266h0IHCGxDAsvjHWSJwOB7JHZZZKtmOy3++Qp4bmcRBMVa5ERVSe02V9G+QjzToCiLdzfJSxR9pMobY5KuY0T7q+cbRicCnULnyO3Usx2pbi8a+eY/+M3bWm+lwYPFd/N/Qniken091TBAeFOQBQN5hIbiNakNKLkdlf6402/BBr2n2lZtYrUiEirS99RM=
  - secure: KNAs1w/PhqFx0pQ3ZK5YKhmDJGVkBTanfFcOxZPBeJ/fxTUegY2d7UcFP/xwfyYnPOZ4bhCkPA3y9pMuvTZb0R04HTWvGzs/Kf7zfUPupy8b+qXUSwYiooZp7+6FRpr21IlkZ8DaY/IyFry/gBrsjo7odRGUDJZ/34+r/9j5kpQb0pBfL4btPVeH65GUosFroJvpchuqrnB/+a0LoUWR/0n3Ry4SCbOjBDuy2ES7L/877zwJ1mH344ZPwI7kd84WG6O5FeLxHzTjfet++kdjEoY/mSlibatSPLiwOtSyNtCjdVUmaOhIj3fUrNyeR7q6enpMrsCICLoERrnn4oxY5WBgGP6udjM/D8WUKD+E9vi1D1odilLcJ6RXhzt/JBULZ9uUmRWqHw97BVkj9wYsWzp/ZVMys8fpf/PCk3SPozhicjoQnIMhbMzdlZ/+N3YA6nez4+PqvjJrxu3cUrAyMHiQcpYaKgmBkb0KmTMq2NHT2Nh32zEhlYGjmfPwt16BoAbLJJ9molxOmMRPUVtukmpmlOjfOXfp1qoaliV+GabFIVfwmE0KHOEtarYgmQOqU5/Y5ZdEBgjn7bocWnrECWXQ1+A6Q68hChHCT80KaOQ+TwODl8keLO9J4JGnF8jSQ0qzz2gnR64x80sB8gDBZKmsidT6dCW12WmMG3Vq518=
  - secure: cObftJFwnCJQPKatdkSHTd4x7nWQCrWret1NjxscI15wE/qiaYEn3ZcNSKC7i4/uaxiTAPE8VQz8TuPw1u46p+4k2LBpz7tHRscmEJGdUWvsAuhlB0HO1ZGIsKxiJdUlds8T9c8ZiLPGAQGBpcMjEwJ/4Uor+YwxOxlMdmw+RcRSbZbRBO+klr3jNpvIF/LFxic6RBOKMc0dASS88/h5tbD+QSb573mCtOzxaOkgWiLl3KZU5RxwAUUNx4iqHtCR7yQ/UKjck+EBfuUAvEP0yL/Wh/jC0c1HCfX4P2Rv2rQp0zBd7Kje6nqLPtpk7vVSogdlcaPUNVCvxoXEv4NrMAjE5jCdYuFVHeqoZOWKyOjRHjRZX9QNaWYpI0HSMte9cU8pkNPD85nCEbAcVyFIePHFrdMLEzNWMoR/vwqqpRQTvw44VsDbK8A9rKripMvdl4MJZpB8gE0XzZy8EBIw/sd5hPEDxo5VFWp1RLfiV9fD4Sz93moEEolgU4btyQPCSBR9XBatgqg9E15eduDgorPLXlhmvPpa1CrvB/9EqV8bIaYYVr3GE1BbF5jDKhgqocWb/v27e7q0k+kQ3ICghOGrQgnxQ5Y1gl93OAChSWGae8z3qReum9/AQnSa3Cs468wWwFkSSv3wfXSD2MHigG6FF58CboBIsWPMaJRHCY0=
  - secure: kvkR3+QgrygY6XlpvXI6zzk1CMxZ2JhuEUkRWiMecepgVGQ3l0KorghRxPzN1onUyWnPoT/rSSgieCGWsGyo3vfmPttKPZKSkxlONhR83gboQJeEpTsEfjlpfYYd1jhs0E/D4tAyPUQfE7iiJ6fwgvaawBR/kaf9gVvWSaE4W+kFpaXkzyKv2zvngBZJhT5bhu3feGd1OqIZz1GRJL46u4A2cdkpawHsN/qTdtO7PNiEjGhVzwCV4ReoumrmAEhb4RZxVJY5q+dKse1zV7Ixk8PkPFsWaEbAsIcEM6V6gPxwvNo3+o1EqeMkQixkDqmv8sWw0o7gCnez1S9sqU9gX0ZX9MS11q8sn2TNA3R80xZDBTdioVfefG6Kd1TNosy5rv794po0E1Tr+9dLptiKWC5OcclcSU9f8aH0rjas+ewvBUPkwaBFRORutuKadQUgQzVYjJ2geBCMMgH4j6kx/CDd1oJ96zN8YbxBXXeLSz+NDryi/KCJPSPgKHuwz52rQKlxAnV/YyUei5KkO5w1+Zg6/F8ru+dsFZ0UYrw2DX/DMOzVGyFE6gWeE77O5HfXFLeVqOTFjMfzgQ6UEunb0TLxZM433QGuwX89Y1DjsTQPPVwBhWXZefMMem+AIf0g6N/Wx6cR50/VEzoLHzQ7mRw4UHLY+VD6/Z7+SAq9TYk=
  - secure: CPtffd7QaaHYFTr+mW1Cn9O5nBFLxZIvlBtB/WqjWJekk+J+QCqPTSTW+WTTWBMwm8y3eNQEa4l2t96U9BU66TsnstcjR/koNZGLN3/6oD5so+ajHg6oeikWFA0F+PJ2MI7Ia4ftGab2P+yNsRETUCqyQYTD3fm9kEwXyS9rG43cUApO/oP+F1cbqyTbaHZUTK4MrNs2x0ORQG4qpjTZoiSGDQ51xxhq9V42uFWUdLr5/sAdbrQf5evy/ljnb5fOJa6CKZpRjVc2go+9d5Yoez4t01orWPGJzuCuYRuZoB3bLeyOhPIMHb5iiRttQY2pG+BPWA+NFqePF9qUjiv7OF/kwKza3Uv82fOovMu8dMoXSzuEjacMVZsVvuXs5PTyEhLEZka2ZvTP93VF+KDN9Pqj5SLUU4Kh/fQIfGHatcdFPtWiPfZH4QOMM1EKVuSEkWnE/LmiG7k3yVO0uPOwyg2QkiGveB/8QNa22N0bkvbsfmVPcoBBUVYTxU2fITxXHKLiTNhX5T3WHE/MhzLitOZsvKqI18ZQqrzn0yM+Fjow01W5RGPBSrLE+k8Hx3qDxHLChu4p5LAVOr48SNcL+Gc9+huYOMfjJfTcXrafTL0TMy7Go8U3AE8w/qxKN7c9g7BjE//NuOoKv21TtNECmP8sTK1CNSZfFT0i01O8NbM=
